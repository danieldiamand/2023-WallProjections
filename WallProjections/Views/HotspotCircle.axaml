<Ellipse xmlns="https://github.com/avaloniaui"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:helper="using:WallProjections.Helper.Interfaces"
         xmlns:views="using:WallProjections.Views"
         mc:Ignorable="d" d:DesignWidth="20" d:DesignHeight="20"
         x:Class="WallProjections.Views.HotspotCircle"
         Width="{Binding Diameter, RelativeSource={RelativeSource Self}}"
         Height="{Binding Diameter, RelativeSource={RelativeSource Self}}"
         Classes.activating="{Binding IsActivating, RelativeSource={RelativeSource Self}}"
         Classes.activated="{Binding IsActivated, RelativeSource={RelativeSource Self}}"
         Classes.pulse="{Binding Pulse, RelativeSource={RelativeSource Self}}">

    <!--TODO Style this properly -->
    <Ellipse.Styles>

        <!-- Base transitions -->
        <Style Selector="views|HotspotCircle">
            <Setter Property="Transitions">
                <Transitions>
                    <!--TODO Change to an actual transition -->
                    <TransformOperationsTransition
                        Property="RenderTransform"
                        Duration="{Binding Source={x:Static helper:IHotspotHandler.ActivationTime}}" />
                    <BrushTransition
                        Property="Fill"
                        Duration="{Binding Source={x:Static helper:IHotspotHandler.ActivationTime}}" />
                </Transitions>
            </Setter>
            <Setter Property="RenderTransform" Value="scale(1)" />
        </Style>

        <!-- ACTIVATING animation -->
        <Style Selector="views|HotspotCircle.activating">
            <!--TODO Change to an actual animation -->
            <Setter Property="RenderTransform" Value="scale(1.25)" />
            <Setter Property="Fill" Value="Aqua" />
        </Style>

        <!-- ACTIVE animation -->
        <Style Selector="views|HotspotCircle.activated">
            <!-- Pulsing animation -->
            <Setter Property="Transitions">
                <Transitions>
                    <!--TODO Change to actual transitions -->
                    <TransformOperationsTransition
                        Property="RenderTransform"
                        Duration="{Binding Source={x:Static views:HotspotCircle.PulseTime}}" />
                    <BrushTransition
                        Property="Fill"
                        Duration="{Binding Source={x:Static views:HotspotCircle.PulseTime}}" />
                </Transitions>
            </Setter>

            <Setter Property="Fill" Value="Firebrick" />

            <!-- Single pulse -->
            <Style Selector="^.pulse">
                <Setter Property="RenderTransform" Value="scale(1.25)" />
            </Style>
        </Style>

    </Ellipse.Styles>
</Ellipse>
